!function(p,t,e,a){"use strict";var n="simpleCalendar",i={months:["january","february","march","april","may","june","july","august","september","october","november","december"],days:["sunday","monday","tuesday","wenesday","thursday","friday","saturday"],minDate:"YYYY-MM-DD",maxDate:"YYYY-MM-DD",displayYear:!0,fixedStartDay:!0,displayEvent:!0,events:[],onMonthChange:function(t){}};function s(t,e){this.element=t,this.settings=p.extend({},i,e),this._defaults=i,this._name=n,this.currentDate=new Date,this.init()}p.extend(s.prototype,{init:function(){var t=p(this.element),e=this.currentDate,a=p('<div class="calendar"></div>'),n=p('<header><h2 class="month"></h2><a class="btn btn-prev" href="#"></a><a class="btn btn-next" href="#"></a></header>');this.updateHeader(e,n),a.append(n),this.buildCalendar(e,a),t.append(a),this.bindEvents()},updateHeader:function(t,e){var a=this.settings.months[t.getMonth()];a+=this.settings.displayYear?" "+t.getFullYear():"",e.find(".month").text(a)},buildCalendar:function(t,e){var a=this;e.find("table").remove();for(var n=p("<table></table>"),i=p("<thead></thead>"),s=p("<tbody></tbody>"),r=1;r<=this.settings.days.length;r++)i.append(p("<td>"+this.settings.days[r%7].substring(0,3)+"</td>"));for(var d=t.getFullYear(),h=t.getMonth(),o=new Date(d,h,1);1!=o.getDay();)o.setDate(o.getDate()-1);for(var l=new Date(d,h+1,0);0!=l.getDay();)l.setDate(l.getDate()+1);for(var c=o;c<=l;c.setDate(c.getDate())){var u=p("<tr></tr>");for(r=0;r<7;r++){var g=p('<td><div class="day">'+c.getDate()+"</div></td>");c.toDateString()===(new Date).toDateString()&&g.find(".day").addClass("today"),c.getMonth()!=t.getMonth()&&g.find(".day").addClass("wrong-month"),a.settings.events.filter(function(t){return a.isSameday(new Date(t.startDate),c)||a.isSameday(new Date(t.endDate),c)}).length&&(g.find(".day").addClass("has-event"),g.on("click",function(t){a.fillUp(p(a.element),t.pageX,t.pageY)})),u.append(g),c.setDate(c.getDate()+1)}s.append(u)}n.append(i),n.append(s);var f=p('<div class="event-container"></div>');e.append(n),e.append(f)},changeMonth:function(t){this.currentDate.setMonth(this.currentDate.getMonth()+t),this.buildCalendar(this.currentDate,p(".calendar")),this.updateHeader(this.currentDate,p(".calendar header")),this.settings.onMonthChange(this.currentDate.getMonth(),this.currentDate.getFullYear())},bindEvents:function(){var t=this;p(".btn-prev").click(function(){t.changeMonth(-1)}),p(".btn-next").click(function(){t.changeMonth(1)})},fillUp:function(t,e,a){var n=t.offset(),i=p('<div class="filler" style=""></div>');i.css("left",e-n.left),i.css("top",a-n.top),p(".calendar").append(i),i.animate({width:"300%",height:"300%"},500,function(){p(".event-container").show(),i.hide()})},empty:function(t,e,a){t.offset();var n=p(".filler");n.css("width","300%"),n.css("height","300%"),n.show(),p(".event-container").hide(),n.animate({width:"0%",height:"0%"},500,function(){n.remove()})},isSameday:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}}),p.fn[n]=function(t){return this.each(function(){p.data(this,"plugin_"+n)||p.data(this,"plugin_"+n,new s(this,t))})}}(jQuery,window,document);